<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Video Analysis</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-700 text-white font-sans p-8">

  <div class="max-w-4xl mx-auto bg-gray-900 rounded-2xl shadow-lg p-10 space-y-8 border border-gray-700">
    <h1 class="text-3xl font-bold text-teal-400 flex items-center gap-2">
      <i class='bx bx-analyse'></i> Analysis Result
    </h1>

    <div class="space-y-2 text-lg">
      <p><strong><i class='bx bx-video'></i> Title:</strong> <span class="text-gray-300">{{ title }}</span></p>
      <p><strong><i class='bx bx-time'></i> Duration:</strong> <span class="text-gray-300">{{ duration }}</span></p>
      <p><strong><i class='bx bx-calendar'></i> Upload Date:</strong> <span class="text-gray-300">{{ upload_date }}</span></p>
    </div>

    <div>
      <h2 class="text-2xl font-semibold text-blue-300 flex items-center gap-2">
        <i class='bx bx-edit-alt'></i> Summary
      </h2>
      <p class="mt-2 text-gray-200">{{ summary }}</p>
    </div>

    <div>
      <h2 class="text-2xl font-semibold text-yellow-300 flex items-center gap-2">
        <i class='bx bx-layer'></i> Flashcards
      </h2>
      <div class="space-y-4 mt-2">
        {% for card in flashcards.split('\n') if card %}
          {% if card.startswith("Q:") %}
            <div class="p-4 rounded-xl bg-gray-800 border border-yellow-500">
              <h3 class="text-lg font-bold text-yellow-200 flex items-center gap-1">
                <i class='bx bx-question-mark'></i> {{ card }}
              </h3>
          {% elif card.startswith("A:") %}
              <p class="text-gray-100 mt-1 flex items-center gap-1">
                <i class='bx bx-check-circle'></i> {{ card }}
              </p></div>
          {% endif %}
        {% endfor %}
      </div>
    </div>

    <div>
      <h2 class="text-2xl font-semibold text-pink-300 flex items-center gap-2">
        <i class='bx bx-search-alt-2'></i> Ask a Question
      </h2>
      <form action="/ask" method="POST" class="mt-4 space-y-4">
        <input type="hidden" name="video_id" value="{{ video_id }}">
        <input type="text" name="query" required
               class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500"
               placeholder="Type your question here...">
        <button type="submit"
                class="px-6 py-2 bg-pink-600 hover:bg-pink-700 text-white font-medium rounded-lg shadow-md flex items-center gap-2">
          <i class='bx bx-send'></i> Ask
        </button>
      </form>
    </div>

    {% if answer %}
      <div>
        <h3 class="text-xl font-semibold text-green-300 mt-6 flex items-center gap-2">
          <i class='bx bx-bulb'></i> Answer:
        </h3>
        <p class="text-gray-100 mt-2">{{ answer }}</p>
      </div>
    {% endif %}

    <div class="mt-8">
      <a href="/" class="text-sm text-blue-400 hover:text-blue-200 flex items-center gap-1">
        <i class='bx bx-arrow-back'></i> Back
      </a>
    </div>
  </div>

</body>
</html>
